<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>json</title>
    <script type="text/javascript">
        'use strict';

        window.onload = function () {
            // JSON(JavaScript Object Notation)
            // 一种数据交换格式
            // 为了统一解析，JSON的字符串规定必须用双引号""，Object的键也必须用双引号""
            /*
                数据类型：
                number：和JavaScript的number完全一致
                boolean：就是JavaScript的true或false
                string：就是JavaScript的string
                null：就是JavaScript的null
                array：就是JavaScript的Array表示方式[]
                object：就是JavaScript的{}表示方式
             */

            // 序列化
            let xiaoming = {
                name: '小明',
                age: 14,
                gender: true,
                height: 1.65,
                grade: null,
                'middle-school': '\"W3C\" Middle School',
                skill: ['JavaScript', 'Java', 'Python', 'Lisp']
            };

            let s = JSON.stringify(xiaoming);
            console.log(s); // {"name":"小明","age":14,"gender":true,
                            // "height":1.65,"grade":null,
                            // "middle-school":"\"W3C\" Middle School",
                            // "skill":["JavaScript","Java","Python","Lisp"]}

            // stringify参数
            // 第二个参数用于控制如何筛选对象的键值
            console.log(JSON.stringify(xiaoming, null, '  '));

            // 如果只想输出指定的属性，可以传入Array
            console.log(JSON.stringify(xiaoming, ['name', 'skill'], '  '));

            // 还可以传入函数
            function convert(key, value) {
                if (typeof value === 'string') {
                    return value.toUpperCase();
                }

                return value;
            }

            console.log(JSON.stringify(xiaoming, convert, '  '));

            // 反序列化
            // 用JSON.parse()可以变成一个JavaScript对象
            console.log(JSON.parse('[1, 2, 3, true]')); // [1, 2, 3, true]
            console.log(JSON.parse('{"name": "小明", "age": 14}')); // {name: "小明", age: 14}
        };
    </script>
</head>

<body>
<div>json</div>
</body>

</html>